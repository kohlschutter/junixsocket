<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M13 from src/site/markdown/quickstart.md at 2024-04-05
 | Rendered using Apache Maven Fluido Skin 2.0.0-M8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M13" />
    <title>junixsocket – Basic Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M8.min.js"></script>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/kohlschutter/junixsocket" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>junixsocket — Unix Domain Sockets for Java</h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-04-05<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.9.1</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Welcome</a></li>
    <li><a href="changelog.html">New &amp; Noteworthy</a></li>
    <li class="active"><a>Quick Start</a></li>
    <li><a href="building.html">Building</a></li>
    <li><a href="compatibility.html">Compatibility</a></li>
    <li><a href="selftest.html">Selftest</a></li>
    <li><a href="dependency.html">Add junixsocket to your project</a></li>
    <li><a href="graalvm.html">GraalVM support</a></li>
   <li class="nav-header">Reference</li>
    <li><a href="apidocs/index.html">API Javadoc</a></li>
    <li><a href="xref/index.html">Source xref</a></li>
    <li><a href="xref-test/index.html">Test xref</a></li>
    <li><a href="junixsocket-codecoverage/jacoco-aggregate/index.html">Code Coverage</a></li>
   <li class="nav-header">Protocols</li>
    <li><a href="junixsocket-tipc/index.html">AF_TIPC</a></li>
    <li class="active"><a>AF_UNIX</a></li>
    <li><a href="junixsocket-vsock/index.html">AF_VSOCK</a></li>
    <li><a href="junixsocket-darwin/index.html">AF_SYSTEM</a></li>
   <li class="nav-header">Demo Code</li>
    <li><a href="demo.html">Command line demos</a></li>
    <li><a href="junixsocket-demo/xref/index.html">Source reference</a></li>
    <li><a href="filedescriptors.html">File descriptors</a></li>
    <li><a href="peercreds.html">Peer credentials</a></li>
    <li><a href="http.html">HTTP over Unix sockets</a></li>
   <li class="nav-header">For Developers</li>
    <li><a href="development.html">Developing junixsocket</a></li>
    <li><a href="unixsockets.html">Unix Sockets Reference</a></li>
    <li><a href="customarch.html">Custom architectures</a></li>
    <li><a href="crosscomp.html">Cross-Compiling with crossclang</a></li>
    <li><a href="eclipse.html">Developing with Eclipse</a></li>
    <li><a href="xcode.html">Developing with Xcode</a></li>
    <li><a href="release.html">Release Instructions</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="junixsocket-common/index.html">junixsocket-common</a></li>
    <li><a href="junixsocket-tipc/index.html">junixsocket-tipc</a></li>
    <li><a href="junixsocket-vsock/index.html">junixsocket-vsock</a></li>
    <li><a href="junixsocket-darwin/index.html">junixsocket-darwin</a></li>
    <li><a href="junixsocket-server/index.html">junixsocket-server</a></li>
    <li><a href="junixsocket-ssl/index.html">junixsocket-ssl</a></li>
    <li><a href="junixsocket-rmi/index.html">junixsocket-rmi</a></li>
    <li><a href="junixsocket-mysql/index.html">junixsocket-mysql</a></li>
    <li><a href="junixsocket-core/index.html">junixsocket-core</a></li>
    <li><a href="junixsocket-demo/index.html">junixsocket-demo</a></li>
    <li><a href="junixsocket-demo-jpackagejlink/index.html">junixsocket-demo-jpackagejlink</a></li>
    <li><a href="junixsocket-dist/index.html">junixsocket-dist</a></li>
    <li><a href="junixsocket-codecoverage/index.html">junixsocket-codecoverage</a></li>
    <li><a href="junixsocket-native-custom/index.html">junixsocket-native-custom</a></li>
    <li><a href="junixsocket-native-android/index.html">junixsocket-native-android</a></li>
    <li><a href="junixsocket-jetty/index.html">junixsocket-jetty</a></li>
    <li><a href="junixsocket-jetty-11/index.html">junixsocket-jetty-11</a></li>
    <li><a href="junixsocket-selftest/index.html">junixsocket-selftest</a></li>
    <li><a href="junixsocket-selftest-native-image/index.html">junixsocket-selftest-native-image</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section>
<h1>Basic Usage</h1>
<p>junixsocket supports the <a href="https://docs.oracle.com/javase/8/docs/api/java/net/Socket.html" class="externalLink">Java Socket API</a> and the <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/SocketChannel.html" class="externalLink">Java NIO SocketChannel API</a>.</p><section>
<h2>Adding junixsocket to your project</h2>
<p><a href="dependency.html">See here</a> how to add junixsocket to your project, whether you use a dependency management system, or not.</p>
<p>Be sure to read the <a href="compatibility.html">compatibility considerations</a>, which also describes how to run a comprehensive self-test on your target environments.</p></section><section>
<h2>General remarks</h2>
<p><code>AFSocket</code> and <code>AFServerSocket</code> work just like their regular Java <code>AF_INET</code> (TCP/IP) counterparts &#x2014; they extend <code>java.net.Socket</code> and <code>java.net.ServerSocket</code> respectively. The same goes for <code>AFSocketChannel</code> and <code>AFServerSocketChannel</code>, as well as <code>AFSocketFactory</code>.</p>
<p>These classes themselves are extended for the particular protocol implementations (for example, UNIX domain socket classes have the prefix <em>AFUNIX</em>: <code>AFUNIXSocket</code>, <code>AFUNIXServerSocket</code>, etc.).</p>
<p>The socket addresses are subclasses of <code>AFSocketAddress</code>, such as <code>AFUNIXSocketAddress</code> (for <code>AF_UNIX</code> domain sockets) and <code>AFTIPCSocketAddress</code> (for <code>AF_TIPC</code> sockets).</p>
<p>Several helper methods simplify using junixsocket versus using the standard Java API.
Not everything can be covered in this quick start document. Be sure to explore the API via Javadoc and by browsing the source code.</p></section><section>
<h2>Working with AF_UNIX domain sockets</h2><section>
<h3>Connecting to an existing AF_UNIX Socket</h3>

<div class="verbatim">
<pre><code>File socketFile = new File(&quot;/path/to/your/socket&quot;);
AFUNIXSocket sock = AFUNIXSocket.newInstance();
sock.connect(AFUNIXSocketAddress.of(socketFile));
</code></pre></div></section><section>
<h3>Creating a new AF_UNIX Server Socket</h3>

<div class="verbatim">
<pre><code>File socketFile = new File(&quot;/path/to/your/socket&quot;);
AFUNIXServerSocket server = AFUNIXServerSocket.newInstance();
server.bind(AFUNIXSocketAddress.of(socketFile));
</code></pre></div></section><section>
<h3>Working with AF_UNIX SocketChannels</h3>

<div class="verbatim">
<pre><code>AFUNIXSelectorProvider provider = AFUNIXSelectorProvider.provider();
AFUNIXSocketChannel sc = provider.openSocketChannel();
sc.connect(AFUNIXSocketAddress.of(new File(&quot;/tmp/test.sock&quot;)));
// (work with SocketChannel API)

AFUNIXSocket socket = sc.socket(); // this always succeeds [1]
// (work with Socket API)

AFUNIXSocket sock = ...;
sock.getChannel(); // this always succeeds as well [1]

AbstractSelector selector = provider.openSelector();
// work with Selector API
</code></pre></div>
<p>[1] Unlike regular Java SocketChannels, you can use the SocketChannel and Socket API interchangeably.</p></section></section><section>
<h2>Complete Examples</h2>
<p>junixsocket provides <a href="junixsocket-demo/xref/index.html">working demos</a> for:</p>
<ul>

<li>Sockets (package <code>org.newsclub.net.unix.demo</code>)</li>
<li>RMI over Unix Sockets (packages <code>org.newsclub.net.unix.demo.rmi</code> and <code>org.newsclub.net.unix.demo.rmi.services</code>)</li>
<li>MySQL over Unix Sockets  (package <code>org.newsclub.net.mysql.demo</code>), also see how to <a href="dependency.html">add junixsocket to your MySQL project</a></li>
</ul>
<p>You can even <a href="demo.html">run the demos from the command line</a> without having to compile anything.</p></section><section>
<h2>Caveats</h2><section>
<h3>General considerations</h3><section>
<h4>Ports, InetSocketAddress</h4>
<p>Whereas TCP/IP sockets point to ports at particular Internet addresses, AF_UNIX sockets point to special files on the local file system. The notion of &#x201c;port&#x201d; is not necessary in this case.</p>
<p>However, junixsocket supports the concept of &#x201c;ports&#x201d; for <code>AFUNIXSocketAddress</code> etc., in order to enable features like Java RMI. It does so by deliberately extending <code>InetSocketAddress</code> for all <code>AFSocketAddress</code> implementations.</p>
<p>Port support may also come handy in other situations, especially when an existing application expects a particular port on a Socket. Please be aware that specifying a particular port number may have no effect for non-RMI connections.</p></section></section><section>
<h3>AF_UNIX domain sockets, AFUNIXSocketAddress &amp; co.</h3><section>
<h4>Maximum path length</h4>
<p>At the system-level, the maximum length of the pathname referring to a Unix domain socket is restricted and may vary from one OS to another. Currently, junixsocket limits the maximum pathname length to 103 bytes (this may mean fewer characters, depending on the encoding). If the maximum length is exceeded an Exception is thrown.</p>
<p>It is therefore recommended to use short pathnames whenever possible.</p></section><section>
<h4>Security</h4>
<p>Unix domain server sockets are created with read-write privileges for everybody on the system, just like TCP/IP sockets are accessible for local users.</p>
<p>If you want to restrict access to a particular user or group, simply create the socket in a directory that has proper access restrictions.</p></section></section><section>
<h3>Other socket implementations</h3>
<p>While most platforms that support junixsocket inherently support <code>AF_UNIX</code> domain sockets, protocols like <code>AF_TIPC</code> are not available everywhere.</p>
<p>However, junixsocket guarantees that you are available to instantiate a corresponding <code>AFSocketAddress</code> (e.g., <code>AFTIPCSocketAddress</code>) on all platforms.</p></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<p id="giscus-parent" style="margin-top:20pt;padding-top:20pt;border-top:thin solid #bbb;">
        <script src="https://giscus.app/client.js"
          data-repo="kohlschutter/junixsocket"
          data-repo-id="MDEwOlJlcG9zaXRvcnkyNzA2NDIwMQ=="
          data-category="Giscus"
          data-category-id="DIC_kwDOAZz3ic4CQT9j"
          data-mapping="pathname"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="light"
          data-lang="en"
          data-loading="lazy"
          crossorigin="anonymous"
          async="async">
        </script>
        <small>
          Discussions widget provided by giscus.app —
          <a
            href="https://github.com/giscus/giscus/blob/main/PRIVACY-POLICY.md"
            target="_top">
            giscus.app privacy policy
          </a> —
          <a href="https://docs.github.com/en/site-policy/github-terms/github-community-guidelines">
          GitHub Community Guidelines
          </a>
        </small>
      </p>
      <script><!--
      document.addEventListener("DOMContentLoaded", function(event) {
        document.getElementById("bodyColumn").appendChild(document.getElementById("giscus-parent"));
      });
      // --></script>
      <p>Copyright 2009–2022
         <a href="https://www.kohlschutter.com/">Kohlschütter Search Intelligence</a>
      </p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>