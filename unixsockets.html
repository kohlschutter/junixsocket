<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M11 from src/site/markdown/unixsockets.md at 2023-09-09
 | Rendered using Apache Maven Fluido Skin 2.0.0-M7
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M11" />
    <title>junixsocket – Unix socket reference</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M7.min.js"></script>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/kohlschutter/junixsocket" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>junixsocket — Unix Domain Sockets for Java</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-09-09<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.7.1</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Welcome"><span class="none"></span>Welcome</a></li>
    <li><a href="changelog.html" title="New &amp; Noteworthy"><span class="none"></span>New &amp; Noteworthy</a></li>
    <li><a href="quickstart.html" title="Quick Start"><span class="none"></span>Quick Start</a></li>
    <li><a href="compatibility.html" title="Compatibility"><span class="none"></span>Compatibility</a></li>
    <li><a href="selftest.html" title="Selftest"><span class="none"></span>Selftest</a></li>
    <li><a href="dependency.html" title="Add junixsocket to your project"><span class="none"></span>Add junixsocket to your project</a></li>
   <li class="nav-header">Reference</li>
    <li><a href="apidocs/index.html" title="API Javadoc"><span class="none"></span>API Javadoc</a></li>
    <li><a href="xref/index.html" title="Source xref"><span class="none"></span>Source xref</a></li>
    <li><a href="xref-test/index.html" title="Test xref"><span class="none"></span>Test xref</a></li>
    <li><a href="junixsocket-codecoverage/jacoco-aggregate/index.html" title="Code Coverage"><span class="none"></span>Code Coverage</a></li>
   <li class="nav-header">Protocols</li>
    <li><a href="junixsocket-tipc/index.html" title="AF_TIPC"><span class="none"></span>AF_TIPC</a></li>
    <li><a href="quickstart.html" title="AF_UNIX"><span class="none"></span>AF_UNIX</a></li>
    <li><a href="junixsocket-vsock/index.html" title="AF_VSOCK"><span class="none"></span>AF_VSOCK</a></li>
    <li><a href="junixsocket-darwin/index.html" title="AF_SYSTEM"><span class="none"></span>AF_SYSTEM</a></li>
   <li class="nav-header">Demo Code</li>
    <li><a href="demo.html" title="Command line demos"><span class="none"></span>Command line demos</a></li>
    <li><a href="junixsocket-demo/xref/index.html" title="Source reference"><span class="none"></span>Source reference</a></li>
    <li><a href="filedescriptors.html" title="File descriptors"><span class="none"></span>File descriptors</a></li>
    <li><a href="peercreds.html" title="Peer credentials"><span class="none"></span>Peer credentials</a></li>
    <li><a href="http.html" title="HTTP over Unix sockets"><span class="none"></span>HTTP over Unix sockets</a></li>
   <li class="nav-header">For Developers</li>
    <li><a href="development.html" title="Developing junixsocket"><span class="none"></span>Developing junixsocket</a></li>
    <li class="active"><a><span class="none"></span>Unix Sockets Reference</a></li>
    <li><a href="customarch.html" title="Custom architectures"><span class="none"></span>Custom architectures</a></li>
    <li><a href="crosscomp.html" title="Cross-Compiling with crossclang"><span class="none"></span>Cross-Compiling with crossclang</a></li>
    <li><a href="eclipse.html" title="Developing with Eclipse"><span class="none"></span>Developing with Eclipse</a></li>
    <li><a href="release.html" title="Release Instructions"><span class="none"></span>Release Instructions</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="junixsocket-common/index.html" title="junixsocket-common"><span class="none"></span>junixsocket-common</a></li>
    <li><a href="junixsocket-tipc/index.html" title="junixsocket-tipc"><span class="none"></span>junixsocket-tipc</a></li>
    <li><a href="junixsocket-vsock/index.html" title="junixsocket-vsock"><span class="none"></span>junixsocket-vsock</a></li>
    <li><a href="junixsocket-darwin/index.html" title="junixsocket-darwin"><span class="none"></span>junixsocket-darwin</a></li>
    <li><a href="junixsocket-server/index.html" title="junixsocket-server"><span class="none"></span>junixsocket-server</a></li>
    <li><a href="junixsocket-rmi/index.html" title="junixsocket-rmi"><span class="none"></span>junixsocket-rmi</a></li>
    <li><a href="junixsocket-mysql/index.html" title="junixsocket-mysql"><span class="none"></span>junixsocket-mysql</a></li>
    <li><a href="junixsocket-core/index.html" title="junixsocket-core"><span class="none"></span>junixsocket-core</a></li>
    <li><a href="junixsocket-demo/index.html" title="junixsocket-demo"><span class="none"></span>junixsocket-demo</a></li>
    <li><a href="junixsocket-dist/index.html" title="junixsocket-dist"><span class="none"></span>junixsocket-dist</a></li>
    <li><a href="junixsocket-codecoverage/index.html" title="junixsocket-codecoverage"><span class="none"></span>junixsocket-codecoverage</a></li>
    <li><a href="junixsocket-native-custom/index.html" title="junixsocket-native-custom"><span class="none"></span>junixsocket-native-custom</a></li>
    <li><a href="junixsocket-native-android/index.html" title="junixsocket-native-android"><span class="none"></span>junixsocket-native-android</a></li>
    <li><a href="junixsocket-jetty/index.html" title="junixsocket-jetty"><span class="none"></span>junixsocket-jetty</a></li>
    <li><a href="junixsocket-jetty-12/index.html" title="junixsocket-jetty"><span class="none"></span>junixsocket-jetty</a></li>
    <li><a href="junixsocket-selftest/index.html" title="junixsocket-selftest"><span class="none"></span>junixsocket-selftest</a></li>
    <li><a href="junixsocket-selftest-native-image/index.html" title="junixsocket-selftest-native-image"><span class="none"></span>junixsocket-selftest-native-image</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h1>Unix socket reference</h1>
<p>Unix sockets, UNIX-domain sockets, Unix domain protocol family, POSIX local inter-process communication socket, POSIX local IPC socket, <code>AF_UNIX</code>, <code>PF_UNIX</code>, <code>PF_LOCAL</code>, <code>AF_FILE</code>, <code>PF_FILE</code> &#x2014;
all these terms more or less refer to the same concept &#x2014; a host-internal protocol and addressing
scheme that is more or less like socket communication between computers on the Internet.
Typically, but not always, Unix sockets are referenced by pathnames on the file system.</p>
<p>Unix sockets are available on a variety of platforms (including macOS, Windows and Linux), and they all
differ a little in how they work.</p>
<p>Here are some references that may be useful to you.</p><section>
<h2>man pages</h2>
<p>man pages are a great reference to know more about what your particular system understands and supports.</p>
<p>Try the following commands on your machine:</p>
<ul>

<li><code>man unix</code>       (or: <code>man 4 unix</code>, <code>man 7 unix</code>)</li>
<li><code>man socket</code>     (or: <code>man 2 socket</code>)</li>
<li><code>man socketpair</code></li>
<li><code>man af_local</code></li>
</ul>
<p>Make sure you follow the references to other man pages in the <code>SEE ALSO</code> sections of each man page.</p>
<p>You can also search for references to <code>unix</code> and <code>socket</code> in the man pages using the <code>apropos</code> command:</p>
<ul>

<li><code>apropos socket</code></li>
<li><code>apropos unix</code></li>
</ul>
<p>Here are some man pages on the web for different platforms:</p>
<ul>

<li>Linux: <a href="http://man7.org/linux/man-pages/man7/unix.7.html" class="externalLink">unix(7)</a>, <a href="http://man7.org/linux/man-pages/man2/socket.2.html" class="externalLink">socket(2)</a></li>
<li>macOS: <a href="https://www.unix.com/man-page/mojave/4/unix/" class="externalLink">unix(4)</a>, <a href="https://www.unix.com/man-page/mojave/2/socket/" class="externalLink">socket(2)</a></li>
<li>Illumos/OpenSolaris: <a href="https://illumos.org/man/3socket/socket" class="externalLink">socket(3SOCKET)</a>, <a href="https://illumos.org/man/3HEAD/socket" class="externalLink">socket(3HEAD)</a>.</li>
<li>FreeBSD: <a href="https://www.freebsd.org/cgi/man.cgi?query=unix&amp;sektion=4" class="externalLink">unix(4)</a>, <a href="https://www.freebsd.org/cgi/man.cgi?query=socket&amp;sektion=2" class="externalLink">socket(2)</a>
<ul>

<li>The FreeBSD website also covers other operating systems. Just select the desired operating system from the drop-down
menu (e.g., NetBSD, OpenBSD, HP-UX, 4.3BSD NET/2</li>
</ul></li>
<li>z/OS: <a href="https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.3.0/com.ibm.zos.v2r3.cbcpx01/adiucvd.htm" class="externalLink">Addressing within the AF_UNIX domain</a>, <a href="https://www.ibm.com/support/knowledgecenter/SSLTBW_2.3.0/com.ibm.zos.v2r3.cbcpx01/ssda.htm" class="externalLink">Using z/OS UNIX sockets</a></li>
<li>POSIX: <a href="https://www.unix.com/man-page/all/7P/unix/" class="externalLink">7P unix</a>, <a href="https://www.unix.com/man-page/all/3posix/socket/" class="externalLink">3POSIX socket</a>, <a href="https://www.unix.com/man-page/all/7posix/un.h/" class="externalLink">7POSIX un.h</a></li>
<li>Also check out the <a href="https://www.unix.com/man-page-repository.php" class="externalLink">man page repository</a> on the unix.com website, which provides entire man page sets for different operating systems.</li>
<li>Windows: Since Build 17063 (Fall Creators Update?), even Microsoft Windows 10 supports AF_UNIX:
<a href="https://blogs.msdn.microsoft.com/commandline/2017/12/19/af_unix-comes-to-windows/" class="externalLink">AF_UNIX comes to Windows</a>, <a href="https://blogs.msdn.microsoft.com/commandline/2018/02/07/windowswsl-interop-with-af_unix/" class="externalLink">Windows/WSL Interop with AF_UNIX</a> &#x2014; check availability using <code>sc query afunix</code>.
The driver is <code>afunix.sys</code>, the headers are in <code>&lt;afunix.h&gt;</code>.</li>
<li>QNX Neutrino RTOS: <a href="http://www.qnx.com/developers/docs/7.0.0/index.html#com.qnx.doc.neutrino.lib_ref/topic/u/unix_proto.html" class="externalLink">unix_proto</a>, <a href="http://www.qnx.com/developers/docs/7.0.0/index.html#com.qnx.doc.neutrino.lib_ref/topic/s/socket.html" class="externalLink">socket</a></li>
</ul></section><section>
<h2>Headers</h2>
<p>You can't go wrong by looking at the system headers (maybe under <code>/usr/include</code>, or elsewhere on your system).</p>
<p>Look for the following userspace headers:</p>
<ul>

<li><code>&lt;sys/un.h&gt;</code></li>
<li><code>&lt;sys/socket.h&gt;</code>.</li>
</ul>
<p>Here are some platform-specific references:</p>
<ul>

<li>
<p>Linux:</p>
<ul>

<li>userspace headers are defined in glibc/dietlibc/musl, etc.</li>
<li><a href="https://github.com/torvalds/linux/blob/master/net/unix/af_unix.c" class="externalLink">kernel source</a></li>
</ul>
<p>You may need to <code>#define _GNU_SOURCE</code> before importing these headers to unlock GNU-specific extensions.</p></li>
<li>
<p>macOS: <a href="http://newosxbook.com/src.jl?tree=xnu&amp;file=/bsd/sys/un.h" class="externalLink">sys/un.h</a>, <a href="http://newosxbook.com/src.jl?tree=xnu&amp;file=/bsd/sys/socket.h" class="externalLink">sys/socket.h</a></p>
<p>You may need to <code>#define _DARWIN_C_SOURCE</code> before importing these headers
to unlock Darwin/macOS-specific extensions.</p></li>
<li>
<p>Open Group Base Specification: <a href="http://pubs.opengroup.org/onlinepubs/009604499/basedefs/sys/un.h.html" class="externalLink">sys/un.h</a>, <a href="http://pubs.opengroup.org/onlinepubs/009604499/basedefs/sys/socket.h.html" class="externalLink">sys/socket.h</a></p></li>
<li>
<p>Windows: <code>&lt;afunix.h&gt;</code></p></li>
</ul></section><section>
<h2>Port numbers</h2>
<p>Unlike Internet socket addresses, Unix domain socket addresses do not support a numeric <em>port</em> component.</p>
<p><a href="https://kohlschutter.github.io/junixsocket/" class="externalLink">junixsocket</a> provides an API that shims in support for ports, in order to support Java RMI over Unix sockets, for example.</p></section><section>
<h2>Other references</h2>
<ul>

<li>junixsocket's <a href="https://github.com/kohlschutter/junixsocket/tree/master/junixsocket-native/src/main/c" class="externalLink">JNI code</a></li>
<li>Wikipedia: <a href="https://en.wikipedia.org/wiki/Unix_domain_socket" class="externalLink">Unix domain socket</a></li>
</ul></section><section>
<h2>Platform-specific limits and extensions</h2><section>
<h3>Length of a socket path (<code>sun_path</code>)</h3>
<p>Some operating systems, such as HP/UX, limit <code>sun_path</code> to only be up to 92 bytes. macOS, QNX and 4.4 BSD limit them to 104. Linux, 4.3 BSD and z/OS have a limit of 108 bytes. A (sometimes) mandatory terminating null byte is included in this calculation.</p></section><section>
<h3>Socket types</h3>
<p>Usually, all platforms support <code>SOCK_STREAM</code> (stream sockets), most support <code>SOCK_DGRAM</code> (datagram sockets), and some also support <code>SOCK_SEQPACKET</code>
(sequenced packet socket with preserved message boundaries).</p></section><section>
<h3>Abstract namespace</h3>
<p>Some platforms, such as Linux, QNX and Windows 10, support a namespace for sockets that is not connected to the filesystem. A socket is in the abstract namespace if it starts with a null byte &#x2014; the remainder of the data structure is part of the name, and null bytes may have no special meaning.</p>
<p><code>unlink</code> upon destruction is typically not necessary for such sockets, and <code>chmod</code>/<code>chown</code> has no effect.</p>
<p><code>SUN_LEN</code> probably shouldn't be used here to determine the length of the <code>sockaddr_un</code> since it uses <code>strlen</code>.</p>
<p>Some platforms (Linux only?) can automatically assign names in the abstract namespace by means of &#x201c;autobind&#x201d;, whereas the name commonly consists of the starting null byte followed by 5 bytes using hexadecimal characters (0-9, a-f).</p></section><section>
<h3>Unnamed sockets</h3>
<p>A pair of sockets can be created using <code>socketpair</code>, which may not always be supported.</p></section><section>
<h3>Transmit file descriptors, credentials</h3>
<p>Ancillary messages / ancillary data allows passing special information over these sockets that is not just binary data. These messages are usually transmitted via <code>sendmsg</code>/<code>recvmsg</code>, and they're practically all very platform-specific.</p>
<ul>

<li>
<p><code>SCM_RIGHTS</code>: Send or receive file descriptors (or more generically, &#x201c;access rights&#x201d;).</p>
<p>The used data structures vary (e.g., <code>struct cmsgcred</code>, <code>struct cmsghdr</code>).</p>
<p>Since on UNIX, practically everything can be referenced through a file descriptor, this feature can be very powerful (e.g., see <a href="https://medium.com/@spencerfricke/android-ahardwarebuffer-shared-memory-over-unix-domain-sockets-7b27b1271b36" class="externalLink">Android AHardwareBuffer Shared Memory over Unix Domain Sockets</a>).</p></li>
<li>
<p><code>SCM_CREDENTIALS</code>/<code>SCM_UCRED</code>: Send process credentials (e.g., UID, GID, etc.), which can be used to authenticate a caller.</p>
<p>In order to receive these credentials, the socket must have a <code>SO_PASSCRED</code>/<code>SO_RECVUCRED</code> option enabled. Also see the <code>SOL_LOCAL</code>-level socket options on FreeBSD and macOS, such as <code>LOCAL_CRED</code>, <code>LOCAL_PEERCRED</code>, <code>LOCAL_PEERPID</code>,  <code>LOCAL_PEEREPID</code>, <code>LOCAL_PEERUUID</code>, <code>LOCAL_PEEREUUID</code>, etc.</p>
<p>Note that authenticating using a particular PID may be insecure as PIDs may be reused for new processes.</p>
<p>The used data structures vary (e.g., <code>struct xucred</code>, <code>struct ucred</code>, <code>ucred_t</code>)</p></li>
</ul></section><section>
<h3>Socket options</h3>
<ul>

<li>
<p><code>SOL_SOCKET</code> level:</p>
<ul>

<li><code>SO_RCVBUF</code> has no effect.</li>
<li><code>SO_SNDBUF</code> imposes an upper limit for outgoing datagrams.</li>
<li><code>SO_PASSCRED</code>/<code>SO_RECVUCRED</code> enables the receipt of file descriptors</li>
<li><code>SO_NOSIGPIPE</code> disable raising the <code>SIGPIPE</code> signal upon broken pipe.</li>
</ul></li>
<li>
<p><code>SOL_LOCAL</code> level (FreeBSD, macOS):</p>
<ul>

<li><code>LOCAL_CRED</code>, <code>LOCAL_PEERCRED</code>, <code>LOCAL_PEERPID</code>,  <code>LOCAL_PEEREPID</code>, <code>LOCAL_PEERUUID</code>, <code>LOCAL_PEEREUUID</code>: Receive peer credentials</li>
</ul></li>
</ul></section><section>
<h3>ioctls</h3>
<ul>

<li><code>FIONREAD</code>/<code>SIOCINQ</code>: For stream sockets, returns the amount of unread bytes in the receive buffer. For datagram sockets, returns the size of either the next pending datagram, or all pending data. Note that the datagram size could be 0 bytes, so this is probably not a good replacement for <code>select</code>.</li>
</ul></section></section><section>
<h2>Command-line tools</h2>
<blockquote>

<p><strong>NOTE:</strong> Not all commands and options are available on all platforms.</p>
</blockquote><section>
<h3>Enumerate available sockets</h3>
<blockquote>

<p><strong>NOTE:</strong> On Linux, when showing abstract namespace paths, null bytes are converted to <code>@</code>. Older tool versions may not handle zero bytes properly.</p>
</blockquote><section>
<h4>lsof</h4>
<p>List unix sockets:</p>

<div class="verbatim">
<pre><code>lsof -U
</code></pre></div>
<p>Also show peer processes/endpoints (Linux-only):</p>

<div class="verbatim">
<pre><code>lsof +E -U
</code></pre></div>
<p>Combine with other parameters (and <code>-a</code>) to restrict to a particular user, process, etc., e.g., <code>sudo lsof -a -U -u root</code></p></section><section>
<h4>ss (Linux)</h4>
<p>List unix sockets:</p>

<div class="verbatim">
<pre><code>ss -x
</code></pre></div>
<p>Also show peer processes/endpoints (it appears that your kernel needs to have <code>UNIX_DIAG</code> enabled for this.):</p>

<div class="verbatim">
<pre><code>ss -xp
</code></pre></div></section><section>
<h4>netstat</h4>
<p>Show listening sockets:</p>

<div class="verbatim">
<pre><code>netstat --unix -l
</code></pre></div>
<p>Show connected sockets:</p>

<div class="verbatim">
<pre><code>netstat --unix
</code></pre></div></section><section>
<h4>Filesystem</h4>
<p>On Linux, you can get a list of all UNIX sockets:</p>

<div class="verbatim">
<pre><code>cat /proc/net/unix
</code></pre></div>
<p>On Android, many sockets are defined in <code>/dev/socket/</code>.</p></section></section><section>
<h3>Communicate with Unix sockets</h3><section>
<h4>netcat / nc</h4>
<p>Connect to an existing stream socket</p>

<div class="verbatim">
<pre><code>nc -U /path/to/socket
</code></pre></div>
<p>Create a listening stream socket</p>

<div class="verbatim">
<pre><code>nc -lU /path/to/socket
</code></pre></div>
<p>Datagrams</p>
<ul>

<li>Some versions of netcat support datagram sockets by adding another <code>-u</code> parameter.</li>
</ul></section><section>
<h4>socat</h4>
<p>socat allows forwarding between two different sockets, as well as piping from and to STDIN, etc. (see <code>man socat</code>).</p>
<p>Check out the address types <code>UNIX-CONNECT</code>, <code>UNIX-LISTEN</code>, <code>UNIX-SENDTO</code>, <code>UNIX-RECVFROM</code>, <code>UNIX-RECV</code>, <code>UNIX-CLIENT</code>. On Linux, replace <code>UNIX-</code> by <code>ABSTRACT-</code>, and you can access sockets in the abstract namespace.</p>
<p>Example:</p>

<div class="verbatim">
<pre><code>socat - UNIX-CONNECT:/path/to/socket
</code></pre></div></section><section>
<h4>websocat</h4>
<p>The socat-like tool for WebSockets also <a href="https://github.com/vi/websocat/blob/master/doc.md" class="externalLink">has support</a> for unix sockets.</p>
<p>Examples</p>
<ul>

<li>
<p>Websocket to Unix socket:</p>

<div class="verbatim">
<pre><code>  websocat ws-l:127.0.0.1:8088 unix:the_socket
</code></pre></div></li>
<li>
<p>Listen socket forwarding to Websocket:</p>

<div class="verbatim">
<pre><code>  websocat --unlink unix-l:the_socket ws://127.0.0.1:8089
</code></pre></div></li>
</ul></section><section>
<h4>curl</h4>
<p>curl can send HTTP requests over Unix sockets. This is useful for communication with <a href="https://www.docker.com/" class="externalLink">Docker</a>, for example:</p>

<div class="verbatim">
<pre><code>curl --unix-socket /var/run/docker.sock http://localhost/images/json
</code></pre></div></section></section></section><section>
<h2>Servers</h2><section>
<h3>Webservers</h3>
<p>Web servers like <a href="https://www.nginx.com/" class="externalLink">nginx</a> provide support to serve content over unix sockets, and curl can be used to test them.</p></section><section>
<h3>Databases</h3>
<p>MySQL and PostgreSQL provide access to the database via Unix Sockets. Since the communication over TCP/IP usually requires SSL, this encryption can be disabled on the Unix domain socket connection, which should improve performance.</p>
<p><a href="https://kohlschutter.github.io/junixsocket/" class="externalLink">junixsocket</a> provides JDBC adapters for both.</p></section></section><section>
<h2>Security</h2><section>
<h3>File permissions</h3>
<p>As a good practice, place unix sockets in a directory with tight access controls. On systems that support file-level controls on the socket itself, use <code>chown</code>/<code>chmod</code> to further restrict access, but do not rely on this alone.</p>
<p>Independent of directory-level access controls, the names of all unix sockets may be available through <code>/proc/net/unix</code> or similar APIs.</p></section><section>
<h3>Abstract namespace</h3>
<p>Since there are no filesystem-level permission enforced upon socket names in the abstract namespace, one should consider them less secure than those specified by file path. Checking peer credentials upon establishing a connection (in <em>both</em> directions!) could make up for this, but that doesn't come for free.</p></section><section>
<h3>Android</h3>
<p>The wild west. Applications with the <code>INTERNET</code> permission to access the Internet also have access to Unix domain sockets. A lot of sockets are unsecured.</p>
<p>See <a href="http://web.eecs.umich.edu/~yurushao/pubs/sinspector_ccs2016.pdf" class="externalLink">Yuru et al., The Misuse of Android Unix Domain Sockets and Security Implications</a> (with <a href="http://web.eecs.umich.edu/~yurushao/pubs/sinspector_ccs2016_slides.pdf" class="externalLink">presentation slides</a>) for an analysis of what can go wrong.</p>
<p>Also see <a href="https://pdfs.semanticscholar.org/4c06/fab7c351851f5e13305ede29fd73cf1cf031.pdf" class="externalLink">Jiang et al., Unix Domain Sockets Applied in Android Malware Should Not Be Ignored</a>.</p></section></section><section>
<h2>Anything missing or wrong?</h2>
<p>Feel free to reach out by email, <a href="mailto:christian@kohlschutter.com" class="externalLink">christian@kohlschutter.com</a>, or file an <a href="https://github.com/kohlschutter/junixsocket/issues" class="externalLink">issue</a> or <a href="https://github.com/kohlschutter/junixsocket/pulls" class="externalLink">pull request</a> with junixsocket.</p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<p id="giscus-parent" style="margin-top:20pt;padding-top:20pt;border-top:thin solid #bbb;">
        <script src="https://giscus.app/client.js"
          data-repo="kohlschutter/junixsocket"
          data-repo-id="MDEwOlJlcG9zaXRvcnkyNzA2NDIwMQ=="
          data-category="Giscus"
          data-category-id="DIC_kwDOAZz3ic4CQT9j"
          data-mapping="pathname"
          data-reactions-enabled="1"
          data-emit-metadata="0"
          data-input-position="bottom"
          data-theme="light"
          data-lang="en"
          data-loading="lazy"
          crossorigin="anonymous"
          async="async">
        </script>
        <small>
          Discussions widget provided by giscus.app —
          <a
            href="https://github.com/giscus/giscus/blob/main/PRIVACY-POLICY.md"
            target="_top">
            giscus.app privacy policy
          </a> —
          <a href="https://docs.github.com/en/site-policy/github-terms/github-community-guidelines">
          GitHub Community Guidelines
          </a>
        </small>
      </p>
      <script><!--
      document.addEventListener("DOMContentLoaded", function(event) {
        document.getElementById("bodyColumn").appendChild(document.getElementById("giscus-parent"));
      });
      // --></script>
      <p>Copyright 2009–2022
         <a href="https://www.kohlschutter.com/">Kohlschütter Search Intelligence</a>
      </p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>